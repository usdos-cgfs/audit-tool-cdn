<div>
  <div class="selected-people" data-bind="foreach: selectedUsers">
    <div class="selected-person">
      <!-- ko ifnot: ID  -->
      <div
        class="status"
        data-bind="attr: {title: ID}, class: resolutionStatus"
      >
        <!-- ko if: resolutionStatus() == 'searching' -->
        <span class="small loader"></span>
        <!-- /ko -->
        <!-- ko if: resolutionStatus() == 'fail' -->
        <i
          class="fa-solid fa-triangle-exclamation"
          data-bind="attr: {title: resolutionMessage}"
        ></i>
        <!-- /ko -->
      </div>
      <!-- /ko -->
      <!-- ko if: ID -->
      <div class="status resolved" data-bind="attr: {title: ID}">
        <span data-bind="text: Initials()"></span>
      </div>
      <!-- /ko -->
      <div
        class="display-name"
        data-bind="text: Title, attr: {title: LoginName}"
      ></div>
      <div
        class="remove"
        title="Remove User"
        data-bind="click: $parent.removeUser"
      >
        <i class="fa-solid fa-xmark"></i>
      </div>
    </div>
  </div>
  <input type="text" data-bind="textInput: searchTerm" />
  <ul class="search-opts" data-bind="foreach: userOpts">
    <li class="search-opt" data-bind="click: $parent.selectUser">
      <span data-bind="text: Title"></span> [<span
        data-bind="text: LoginName"
      ></span
      >]
    </li>
  </ul>
</div>

<style>
  .selected-people {
    display: flex;
    gap: 0.4rem;
  }

  .selected-person {
    display: flex;
    align-items: stretch;
    border: 1px solid var(--primary-color);
    border-radius: 2rem;
    gap: 0.4rem;
    height: 2rem;
    margin: 0.4rem 0;
    cursor: default;
  }

  .selected-person .status {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    border-radius: 1rem;
    color: white;
  }

  .selected-person .status.resolved {
    background-color: var(--primary-color);
    color: white !important;
  }

  .selected-person .status.fail {
    background-color: var(--warn-color);
    color: white !important;
  }

  .selected-person .display-name {
    align-content: center;
    font-weight: 600;
  }

  .selected-person .remove {
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 1rem;
    width: 2rem;
    color: var(--bg-dark-secondary-color);
  }

  .selected-person .remove:hover {
    background-color: var(--bg-very-light-color);
    cursor: pointer;
  }
</style>
